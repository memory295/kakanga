(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8064],{1157:(e,i,t)=>{Promise.resolve().then(t.bind(t,6268))},6268:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>f});var s=t(5155),a=t(2115),r=t(63),l=t(8248),n=t(3209),c=t(7003),d=t(6170),o=t(7001),p=t(235),h=t(7507),m=t(4916),u=t(5626),x=t(5229),v=t(6191),j=t(6046),y=t(2619),b=t.n(y),g=t(9848),N=t(8171);function f(){let e=(0,r.useRouter)(),i=(0,r.useParams)().id,[t,y]=(0,a.useState)(!1),[f,A]=(0,a.useState)(!0),[q,C]=(0,a.useState)(null),[w,D]=(0,a.useState)({title:"",description:"",department:"",location:"",type:"Full-time",requirements:[""],responsibilities:[""],applicationDeadline:"",isActive:!0});(0,a.useEffect)(()=>{(async()=>{try{let t=await g.Jk.getById(i);t?(C(t),D({title:t.title,description:t.description,department:t.department,location:t.location,type:t.type,requirements:t.requirements&&t.requirements.length>0?t.requirements:[""],responsibilities:t.responsibilities&&t.responsibilities.length>0?t.responsibilities:[""],applicationDeadline:t.applicationDeadline?t.applicationDeadline.toISOString().split("T")[0]:"",isActive:t.isActive})):((0,N.oR)({title:"Error",description:"Vacancy not found",variant:"destructive"}),e.push("/dashboard/vacancies"))}catch(e){console.error("Load vacancy error:",e),(0,N.oR)({title:"Error",description:"Failed to load vacancy data",variant:"destructive"})}finally{A(!1)}})()},[i,e]);let k=(e,i)=>{D(t=>({...t,[e]:i}))},E=(e,i,t)=>{let s=[...w[e]];s[i]=t,D(i=>({...i,[e]:s}))},R=e=>{D(i=>({...i,[e]:[...i[e],""]}))},J=(e,i)=>{if(w[e].length>1){let t=w[e].filter((e,t)=>t!==i);D(i=>({...i,[e]:t}))}},B=async t=>{if(t.preventDefault(),!w.title.trim()||!w.description.trim()||!w.department.trim()||!w.location.trim())return void(0,N.oR)({title:"Error",description:"Please fill in all required fields",variant:"destructive"});y(!0);try{let t={title:w.title.trim(),description:w.description.trim(),department:w.department.trim(),location:w.location.trim(),type:w.type,requirements:w.requirements.filter(e=>""!==e.trim()),responsibilities:w.responsibilities.filter(e=>""!==e.trim()),applicationDeadline:w.applicationDeadline?new Date(w.applicationDeadline):void 0,isActive:w.isActive};await g.Jk.update(i,t)?((0,N.oR)({title:"Success",description:"Vacancy updated successfully"}),e.push("/dashboard/vacancies")):(0,N.oR)({title:"Error",description:"Failed to update vacancy",variant:"destructive"})}catch(e){console.error("Update vacancy error:",e),(0,N.oR)({title:"Error",description:"An error occurred while updating the vacancy",variant:"destructive"})}finally{y(!1)}};return f?(0,s.jsx)(l.A,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):q?(0,s.jsx)(l.A,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(b(),{href:"/dashboard/vacancies",children:(0,s.jsxs)(c.Button,{variant:"outline",size:"sm",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Back to Vacancies"]})}),(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Edit Vacancy: ",q.title]})]}),(0,s.jsxs)(n.Zp,{className:"max-w-2xl",children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Vacancy Details"})}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"title",children:"Job Title *"}),(0,s.jsx)(d.p,{id:"title",value:w.title,onChange:e=>k("title",e.target.value),placeholder:"Enter job title",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"description",children:"Job Description *"}),(0,s.jsx)(o.T,{id:"description",value:w.description,onChange:e=>k("description",e.target.value),placeholder:"Enter detailed job description",rows:4,required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"department",children:"Department *"}),(0,s.jsx)(d.p,{id:"department",value:w.department,onChange:e=>k("department",e.target.value),placeholder:"Enter department",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"location",children:"Location *"}),(0,s.jsx)(d.p,{id:"location",value:w.location,onChange:e=>k("location",e.target.value),placeholder:"Enter job location",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"type",children:"Employment Type"}),(0,s.jsxs)(h.l6,{value:w.type,onValueChange:e=>k("type",e),children:[(0,s.jsx)(h.bq,{children:(0,s.jsx)(h.yv,{placeholder:"Select employment type"})}),(0,s.jsxs)(h.gC,{children:[(0,s.jsx)(h.eb,{value:"Full-time",children:"Full-time"}),(0,s.jsx)(h.eb,{value:"Part-time",children:"Part-time"}),(0,s.jsx)(h.eb,{value:"Contract",children:"Contract"}),(0,s.jsx)(h.eb,{value:"Temporary",children:"Temporary"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"applicationDeadline",children:"Application Deadline"}),(0,s.jsx)(d.p,{id:"applicationDeadline",type:"date",value:w.applicationDeadline,onChange:e=>k("applicationDeadline",e.target.value)})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{children:"Requirements"}),w.requirements.map((e,i)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.p,{value:e,onChange:e=>E("requirements",i,e.target.value),placeholder:"Requirement ".concat(i+1),className:"flex-1"}),w.requirements.length>1&&(0,s.jsx)(c.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>J("requirements",i),children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})]},i)),(0,s.jsxs)(c.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>R("requirements"),children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Add Requirement"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{children:"Responsibilities"}),w.responsibilities.map((e,i)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.p,{value:e,onChange:e=>E("responsibilities",i,e.target.value),placeholder:"Responsibility ".concat(i+1),className:"flex-1"}),w.responsibilities.length>1&&(0,s.jsx)(c.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>J("responsibilities",i),children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})]},i)),(0,s.jsxs)(c.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>R("responsibilities"),children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Add Responsibility"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.S,{id:"isActive",checked:w.isActive,onCheckedChange:e=>k("isActive",e)}),(0,s.jsx)(p.J,{htmlFor:"isActive",children:"Active (visible to job seekers)"})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,s.jsxs)(c.Button,{type:"submit",disabled:t,children:[t?(0,s.jsx)("div",{className:"animate-spin h-4 w-4 border border-white border-t-transparent rounded-full mr-2"}):(0,s.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Update Vacancy"]}),(0,s.jsx)(b(),{href:"/dashboard/vacancies",children:(0,s.jsx)(c.Button,{type:"button",variant:"outline",children:"Cancel"})})]})]})})]})]})}):(0,s.jsx)(l.A,{children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Vacancy not found"}),(0,s.jsx)(b(),{href:"/dashboard/vacancies",children:(0,s.jsx)(c.Button,{className:"mt-4",children:"Back to Vacancies"})})]})})}}},e=>{e.O(0,[9135,1497,1710,7112,9353,8037,4919,7080,4117,8441,1255,7358],()=>e(e.s=1157)),_N_E=e.O()}]);