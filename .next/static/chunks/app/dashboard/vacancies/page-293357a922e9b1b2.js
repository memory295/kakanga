(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[715],{2703:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>D});var a=t(5155),r=t(2115),i=t(8248),l=t(3209),n=t(7003),c=t(6170),d=t(7812),o=t(9633),x=t(6191),m=t(6651),u=t(2529),h=t(8874),p=t(1873),f=t(6983),v=t(1871),g=t(6485),j=t(3),N=t(1010),y=t(1360),b=t(2619),A=t.n(b),w=t(6261),S=t(9848),T=t(3810),E=t(8171);function D(){let{vacancies:e,loading:s,error:t,refetch:b}=(0,w.DF)(),{user:D}=(0,T.A)(),[_,k]=(0,r.useState)(""),[I,O]=(0,r.useState)("All"),[C,R]=(0,r.useState)("All"),[F,L]=(0,r.useState)(null),M=["All",...Array.from(new Set(e.map(e=>e.department).filter(Boolean)))],V=e.filter(e=>{let s=e.title.toLowerCase().includes(_.toLowerCase())||e.location.toLowerCase().includes(_.toLowerCase())||e.department.toLowerCase().includes(_.toLowerCase()),t="All"===I||"Active"===I&&e.isActive||"Inactive"===I&&!e.isActive,a="All"===C||e.department===C;return s&&t&&a}),q=async e=>{if(window.confirm("Are you sure you want to delete this vacancy? This action cannot be undone.")){L(e);try{await S.Jk.delete(e)?((0,E.oR)({title:"Success",description:"Vacancy deleted successfully"}),b()):(0,E.oR)({title:"Error",description:"Failed to delete vacancy",variant:"destructive"})}catch(e){console.error("Delete error:",e),(0,E.oR)({title:"Error",description:"An error occurred while deleting the vacancy",variant:"destructive"})}finally{L(null)}}},$=async(e,s)=>{try{await S.Jk.update(e,{isActive:!s})?((0,E.oR)({title:"Success",description:"Vacancy ".concat(s?"deactivated":"activated"," successfully")}),b()):(0,E.oR)({title:"Error",description:"Failed to update vacancy status",variant:"destructive"})}catch(e){console.error("Update error:",e),(0,E.oR)({title:"Error",description:"An error occurred while updating the vacancy",variant:"destructive"})}};return s?(0,a.jsx)(i.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,a.jsx)(i.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(o.A,{className:"mr-2 h-6 w-6"}),"Vacancies Management"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage job postings and recruitment"})]}),(0,a.jsx)(A(),{href:"/dashboard/vacancies/new",children:(0,a.jsxs)(n.$,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),"Post New Vacancy"]})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Filters"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(c.p,{placeholder:"Search vacancies...",value:_,onChange:e=>k(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 px-2 py-1",children:"Status:"}),["All","Active","Inactive"].map(e=>(0,a.jsx)(n.$,{variant:I===e?"default":"outline",size:"sm",onClick:()=>O(e),children:e},e))]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 px-2 py-1",children:"Department:"}),M.map(e=>(0,a.jsx)(n.$,{variant:C===e?"default":"outline",size:"sm",onClick:()=>R(e),children:e},e))]})]})]})})]}),(0,a.jsx)("div",{className:"grid gap-6",children:V.map(e=>(0,a.jsx)(l.Zp,{className:"hover:shadow-md transition-shadow",children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg line-clamp-2",children:e.title}),(0,a.jsx)("div",{className:"flex items-center gap-2 shrink-0",children:(0,a.jsx)(d.E,{variant:e.isActive?"default":"secondary",className:e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:e.isActive?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Inactive"]})})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 mb-3 text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.A,{className:"w-4 h-4"}),e.location]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),e.type]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),e.department]}),e.applicationDeadline&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-red-600",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),"Deadline: ",e.applicationDeadline.toLocaleDateString()]})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-3",children:e.description}),e.requirements&&e.requirements.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Requirements:"})]}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1 pl-4",children:[e.requirements.slice(0,3).map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"w-1 h-1 bg-gray-400 rounded-full mt-2 shrink-0"}),e]},s)),e.requirements.length>3&&(0,a.jsxs)("li",{className:"text-xs text-gray-500",children:["+",e.requirements.length-3," more requirements..."]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)(g.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Posted: ",e.postedDate.toLocaleDateString()]}),(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsxs)("span",{children:["Updated: ",e.updatedAt.toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 lg:shrink-0",children:[(0,a.jsx)(n.$,{variant:e.isActive?"outline":"default",size:"sm",onClick:()=>$(e.id,e.isActive),children:e.isActive?"Deactivate":"Activate"}),(0,a.jsx)(A(),{href:"/dashboard/vacancies/".concat(e.id,"/edit"),children:(0,a.jsxs)(n.$,{variant:"outline",size:"sm",className:"w-full",children:[(0,a.jsx)(N.A,{className:"h-3 w-3 mr-1"}),"Edit"]})}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>q(e.id),disabled:F===e.id,children:[F===e.id?(0,a.jsx)("div",{className:"animate-spin h-3 w-3 border border-red-600 border-t-transparent rounded-full mr-1"}):(0,a.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})})},e.id))}),0===V.length&&!s&&(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"text-center py-12",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No vacancies found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:_||"All"!==I||"All"!==C?"No vacancies match your current filters.":"Get started by posting your first job vacancy."}),(0,a.jsx)(A(),{href:"/dashboard/vacancies/new",children:(0,a.jsxs)(n.$,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Post First Vacancy"]})})]})})]})})}},2916:(e,s,t)=>{Promise.resolve().then(t.bind(t,2703))},6170:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(5155),r=t(2115),i=t(5016);let l=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});l.displayName="Input"},7812:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(5155);t(2115);var r=t(3101),i=t(5016);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(l({variant:t}),s),...r})}},8171:(e,s,t)=>{"use strict";t.d(s,{dj:()=>x,oR:()=>o});var a=t(2115);let r=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=[],c={toasts:[]};function d(e){c=((e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}})(c,e),n.forEach(e=>{e(c)})}function o(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,s]=a.useState(c);return a.useEffect(()=>(n.push(s),()=>{let e=n.indexOf(s);e>-1&&n.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},e=>{e.O(0,[135,497,710,112,353,991,261,80,441,493,358],()=>e(e.s=2916)),_N_E=e.O()}]);